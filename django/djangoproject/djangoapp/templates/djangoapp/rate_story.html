{% extends "djangoapp/base.html" %}

{% block title %}Rate Story - NAHB Adventure{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 50px auto;">
    <div class="card" style="padding: 40px;">
        <h1>Rate: {{ story.title }}</h1>
        <p style="color: #666; margin: 20px 0;">{{ story.description }}</p>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label><strong>Your Rating</strong></label>
                <select name="rating" required style="font-size: 16px;">
                    <option value="">-- Select rating --</option>
                    <option value="1" {% if existing_rating and existing_rating.rating == 1 %}selected{% endif %}>⭐ 1 Star - Poor</option>
                    <option value="2" {% if existing_rating and existing_rating.rating == 2 %}selected{% endif %}>⭐⭐ 2 Stars - Below Average</option>
                    <option value="3" {% if existing_rating and existing_rating.rating == 3 %}selected{% endif %}>⭐⭐⭐ 3 Stars - Average</option>
                    <option value="4" {% if existing_rating and existing_rating.rating == 4 %}selected{% endif %}>⭐⭐⭐⭐ 4 Stars - Good</option>
                    <option value="5" {% if existing_rating and existing_rating.rating == 5 %}selected{% endif %}>⭐⭐⭐⭐⭐ 5 Stars - Excellent</option>
                </select>
            </div>
            
            <div class="form-group">
                <label><strong>Comment (Optional)</strong></label>
                <textarea name="comment" rows="5" placeholder="Share your thoughts about this story...">{% if existing_rating %}{{ existing_rating.comment }}{% endif %}</textarea>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button type="submit" class="btn btn-primary" style="flex: 1;">
                    {% if existing_rating %}Update Rating{% else %}Submit Rating{% endif %}
                </button>
                <a href="{% url 'story_list' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
        
        {% if existing_rating %}
            <p style="color: #4CAF50; margin-top: 15px; text-align: center;">
                ✓ You've already rated this story. Update your rating above.
            </p>
        {% endif %}
    </div>
</div>
{% endblock %}